{"ast":null,"code":"var _jsxFileName = \"/Users/evanbyrnes/Pycharm-python-workspace/T13_SP/client/src/components/PredictionInput.js\";\n// Importing outside developed components.\nimport React from \"react\";\nimport DateTimePicker from \"react-datetime-picker\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\"; // Importing self-developed components.\n\nimport ModelApi from \"./ModelApi\";\nimport RouteStopsApi from \"./RouteStopsApi\"; // Importing outside developed css.\n\nimport \".././styles.css\"; // Generating all of the GUI elements needed to provide the user with\n// journey time prediction. e.g. Date and Time select, Route select, etc.\n\nconst PredictionInput = props => {\n  // Tracking this in state in order to enable a submit button to trigger the ModelApi response.\n  const [destinationSelected, setDestinationSelected] = React.useState([]);\n  const [destinationRoute, setDestinationRoute] = React.useState([\"Please wait\"]); // Getting a list of stops and the direction from this api route.\n  // Takes the users chosen route and origin stop as input.\n  // console.log(\n  //   \"originNumber going into RouteStipsApi from PredictionInput\",\n  //   props.originNumber\n  // );\n\n  const getStops = RouteStopsApi(props.routeSelect, props.originNumber); // console.log(\n  //   \"getStops is here in PredictionInput where the direction indicator is being delivered\",\n  //   getStops\n  // );\n  // // console.log(\"PredictionInput received routeSelect\", props.routeSelect);\n  // For the Typeaheads containing bus route destination, user origin & user destination .\n\n  const refSelectedRoute = React.useRef();\n  const refUserOrigin = React.useRef();\n  const refUserDestination = React.useRef();\n  const directionIndicator = parseInt(getStops[0]); // console.log(\"this is the direction indicator.\", directionIndicator);\n  // getStops.splice(0, 1); // Removes the first element of getStops only if it is equal to 1 or 2.\n  // console.log(\"PredictionInput: getStops triggered after splice: \", getStops);\n  // Convert that array of strings to integers.\n  // A map method for Arrays, applying a function to all elements of an array.\n  // Skips the first element, this is direction indicator.\n\n  const directionStopNumbers = getStops.slice(1).map(function (x) {\n    if (getStops.length > 1) {\n      return parseInt(x, 10);\n    } else if (getStops.length == 1) {\n      console.log();\n      return getStops[1];\n    }\n  });\n  const routeDirectionStops = [\"\"];\n  const destinationPlaceHolder = [\"Please wait\"];\n\n  if (directionStopNumbers.length > 1) {\n    for (var q = 0; q < props.parsedStops.length; q++) {\n      for (var r = 0; r < directionStopNumbers.length; r++) {\n        if (directionStopNumbers[r] === parseInt(props.parsedStops[q].id)) {\n          routeDirectionStops.push(props.parsedStops[q].description);\n        }\n      } // setDestinationRoute(routeDirectionStops);\n\n    }\n  } else if (directionStopNumbers.length == 1) {\n    routeDirectionStops.push(getStops[1]); // setDestinationRoute(routeDirectionStops);\n  } // for setting the date limits in date picker\n\n\n  function addDays(date, days) {\n    const copy = new Date(Number(date));\n    copy.setDate(date.getDate() + days);\n    return copy;\n  }\n\n  const date = new Date();\n  const newDate = addDays(date, 6);\n  return /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n    controlId: \"formRoute\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typeahead // Inbuilt props: https://github.com/ericgio/react-bootstrap-typeahead/blob/master/docs/API.md#typeahead.\n  , {\n    id: \"basic-example\",\n    options: props.allRoutes,\n    ref: refSelectedRoute,\n    placeholder: \"Select a route: e.g. 46A\",\n    onChange: route => {\n      try {\n        for (var i = 0; i < props.allRoutes.length; i++) {\n          if (String(route) === props.allRoutes[i]) {\n            props.setResponseValidator(false);\n            const routeString = props.allRoutes[i];\n            props.routeChoice({\n              routeString\n            });\n            props.setRouteSelect(routeString);\n            props.setResponse(null);\n            props.originNumberChoice({\n              id: \"0\"\n            });\n            props.destinationNumberChoice({\n              id: \"0\"\n            });\n            props.setOrigin(\"\");\n            props.setDestination(\"\");\n            refUserOrigin.current.clear();\n            refUserDestination.current.clear();\n          }\n        }\n      } catch (error) {\n        console.log(\"ðŸ˜± Error: \", error);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n    controlId: \"formTimeOfTravel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, \"When are you travelling?\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DateTimePicker // Inbuilt props: https://github.com/Hacker0x01/react-datepicker/blob/master/docs/index.md.\n  , {\n    value: props.selectedTime,\n    onChange: date => props.timeChoice(date),\n    minDate: date,\n    maxDate: newDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n    controlId: \"formDeparture\" // CSS\n    ,\n    style: {\n      paddingTop: \"2vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typeahead // Inbuilt props: https://github.com/ericgio/react-bootstrap-typeahead/blob/master/docs/API.md#typeahead.\n  , {\n    id: \"basic-example\",\n    options: props.filteredStops,\n    placeholder: \"Departing from: e.g. Stop 334, D'Olier Street\",\n    ref: refUserOrigin,\n    onChange: address => {\n      try {\n        for (var i = 0; i < props.parsedStops.length; i++) {\n          if (String(address) === props.parsedStops[i].description) {\n            const id = props.parsedStops[i].id;\n            const lat = props.parsedStops[i].geometry.lat;\n            const lng = props.parsedStops[i].geometry.lng;\n            props.destinationNumberChoice({\n              id: \"0\"\n            });\n            refUserDestination.current.clear();\n            props.setResponseValidator(false);\n            props.originNumberChoice({\n              id\n            });\n            props.originChoice({\n              lat,\n              lng\n            });\n            props.panTo({\n              lat,\n              lng\n            });\n            props.setResponse(null);\n          }\n        }\n      } catch (error) {\n        console.log(\"ðŸ˜± Error: \", error);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n    controlId: \"formArrival\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typeahead // Inbuilt props: https://github.com/ericgio/react-bootstrap-typeahead/blob/master/docs/API.md#typeahead.\n  , {\n    id: \"basic-example\",\n    options: destinationRoute,\n    placeholder: \"Destination: e.g. Stop 2007, Stillorgan Road\",\n    ref: refUserDestination,\n    onChange: s => {\n      try {\n        for (var i = 0; i < props.parsedStops.length; i++) {\n          if (String(s) === props.parsedStops[i].description) {\n            const lat = props.parsedStops[i].geometry.lat;\n            const lng = props.parsedStops[i].geometry.lng;\n            props.setResponseValidator(false);\n            props.panTo({\n              lat,\n              lng\n            });\n            props.setDirectionSelect(directionIndicator);\n            props.setResponse(null);\n            setDestinationSelected(s);\n          }\n        }\n      } catch (error) {\n        console.log(\"ðŸ˜± Error: \", error);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }), \" \", /*#__PURE__*/React.createElement(Form.Group, {\n    // CSS\n    style: {\n      paddingTop: \"1vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button // Inbuilt props: https://react-bootstrap.github.io/components/buttons/#button-props.\n  , {\n    style: {\n      width: \"45%\"\n    },\n    onClick: () => {\n      try {\n        // console.log(\"PredictionInput button triggered\");\n        for (var i = 0; i < props.parsedStops.length; i++) {\n          if (String(destinationSelected) === props.parsedStops[i].description) {\n            const id = props.parsedStops[i].id;\n            const lat = props.parsedStops[i].geometry.lat;\n            const lng = props.parsedStops[i].geometry.lng;\n            props.setResponseValidator(false);\n            props.destinationChoice({\n              lat,\n              lng\n            });\n            props.destinationNumberChoice({\n              id\n            });\n          }\n        }\n      } catch (error) {\n        console.log(\"ðŸ˜± Error: \", error);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, \"Submit\"), \" \", /*#__PURE__*/React.createElement(Button // Inbuilt props: https://react-bootstrap.github.io/components/buttons/#button-props.\n  , {\n    variant: \"secondary\",\n    style: {\n      width: \"45%\",\n      float: \"right\"\n    },\n    onClick: () => {\n      props.setResponseValidator(false);\n      props.setRouteSelect(\"\");\n      props.setRouteString(\"\");\n      props.setFilteredStops([]);\n      props.setMarkerSelection(true);\n      props.setResponse(null);\n      props.setOrigin(\"\");\n      props.setDestination(\"\");\n      props.originNumberChoice({\n        id: \"0\"\n      });\n      props.destinationNumberChoice({\n        id: \"0\"\n      });\n      props.setGeoMarkers([]);\n      props.setStopMarkers([]);\n      refSelectedRoute.current.clear();\n      refUserOrigin.current.clear();\n      refUserDestination.current.clear();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, \"Clear\")))), /*#__PURE__*/React.createElement(ModelApi // Passing in props - Variables defined in App.js.\n  , {\n    distance: props.distance,\n    originNumber: props.originNumber,\n    destinationNumber: props.destinationNumber,\n    timeDayMonth: props.timeDayMonth,\n    routeSelect: props.routeSelect,\n    directionSelect: props.directionSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default PredictionInput;","map":{"version":3,"sources":["/Users/evanbyrnes/Pycharm-python-workspace/T13_SP/client/src/components/PredictionInput.js"],"names":["React","DateTimePicker","Typeahead","Form","Button","ModelApi","RouteStopsApi","PredictionInput","props","destinationSelected","setDestinationSelected","useState","destinationRoute","setDestinationRoute","getStops","routeSelect","originNumber","refSelectedRoute","useRef","refUserOrigin","refUserDestination","directionIndicator","parseInt","directionStopNumbers","slice","map","x","length","console","log","routeDirectionStops","destinationPlaceHolder","q","parsedStops","r","id","push","description","addDays","date","days","copy","Date","Number","setDate","getDate","newDate","allRoutes","route","i","String","setResponseValidator","routeString","routeChoice","setRouteSelect","setResponse","originNumberChoice","destinationNumberChoice","setOrigin","setDestination","current","clear","error","textAlign","display","alignItems","justifyContent","selectedTime","timeChoice","paddingTop","filteredStops","address","lat","geometry","lng","originChoice","panTo","s","setDirectionSelect","width","destinationChoice","float","setRouteString","setFilteredStops","setMarkerSelection","setGeoMarkers","setStopMarkers","distance","destinationNumber","timeDayMonth","directionSelect"],"mappings":"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","sourcesContent":["// Importing outside developed components.\nimport React from \"react\";\nimport DateTimePicker from \"react-datetime-picker\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\n// Importing self-developed components.\nimport ModelApi from \"./ModelApi\";\nimport RouteStopsApi from \"./RouteStopsApi\";\n// Importing outside developed css.\nimport \".././styles.css\";\n\n// Generating all of the GUI elements needed to provide the user with\n// journey time prediction. e.g. Date and Time select, Route select, etc.\nconst PredictionInput = (props) => {\n  // Tracking this in state in order to enable a submit button to trigger the ModelApi response.\n  const [destinationSelected, setDestinationSelected] = React.useState([]);\n  const [destinationRoute, setDestinationRoute] = React.useState([\n    \"Please wait\",\n  ]);\n\n  // Getting a list of stops and the direction from this api route.\n  // Takes the users chosen route and origin stop as input.\n  // console.log(\n  //   \"originNumber going into RouteStipsApi from PredictionInput\",\n  //   props.originNumber\n  // );\n  const getStops = RouteStopsApi(props.routeSelect, props.originNumber);\n  // console.log(\n  //   \"getStops is here in PredictionInput where the direction indicator is being delivered\",\n  //   getStops\n  // );\n\n  // // console.log(\"PredictionInput received routeSelect\", props.routeSelect);\n  // For the Typeaheads containing bus route destination, user origin & user destination .\n  const refSelectedRoute = React.useRef();\n  const refUserOrigin = React.useRef();\n  const refUserDestination = React.useRef();\n\n  const directionIndicator = parseInt(getStops[0]);\n  // console.log(\"this is the direction indicator.\", directionIndicator);\n\n  // getStops.splice(0, 1); // Removes the first element of getStops only if it is equal to 1 or 2.\n\n  // console.log(\"PredictionInput: getStops triggered after splice: \", getStops);\n\n  // Convert that array of strings to integers.\n  // A map method for Arrays, applying a function to all elements of an array.\n  // Skips the first element, this is direction indicator.\n  const directionStopNumbers = getStops.slice(1).map(function (x) {\n    if (getStops.length > 1) {\n      return parseInt(x, 10);\n    } else if (getStops.length == 1) {\n      console.log();\n      return getStops[1];\n    }\n  });\n\n  const routeDirectionStops = [\"\"];\n  const destinationPlaceHolder = [\"Please wait\"];\n\n  if (directionStopNumbers.length > 1) {\n    for (var q = 0; q < props.parsedStops.length; q++) {\n      for (var r = 0; r < directionStopNumbers.length; r++) {\n        if (directionStopNumbers[r] === parseInt(props.parsedStops[q].id)) {\n          routeDirectionStops.push(props.parsedStops[q].description);\n        }\n      }\n      // setDestinationRoute(routeDirectionStops);\n    }\n  } else if (directionStopNumbers.length == 1) {\n    routeDirectionStops.push(getStops[1]);\n    // setDestinationRoute(routeDirectionStops);\n  }\n\n  // for setting the date limits in date picker\n  function addDays(date, days) {\n    const copy = new Date(Number(date));\n    copy.setDate(date.getDate() + days);\n    return copy;\n  }\n\n  const date = new Date();\n  const newDate = addDays(date, 6);\n\n  return (\n    <Form>\n      <Form.Group\n        // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n        controlId=\"formRoute\"\n      >\n        <Typeahead\n          // Inbuilt props: https://github.com/ericgio/react-bootstrap-typeahead/blob/master/docs/API.md#typeahead.\n          id=\"basic-example\"\n          options={props.allRoutes}\n          ref={refSelectedRoute}\n          placeholder=\"Select a route: e.g. 46A\"\n          onChange={(route) => {\n            try {\n              for (var i = 0; i < props.allRoutes.length; i++) {\n                if (String(route) === props.allRoutes[i]) {\n                  props.setResponseValidator(false);\n                  const routeString = props.allRoutes[i];\n                  props.routeChoice({ routeString });\n                  props.setRouteSelect(routeString);\n                  props.setResponse(null);\n                  props.originNumberChoice({ id: \"0\" });\n                  props.destinationNumberChoice({ id: \"0\" });\n                  props.setOrigin(\"\");\n                  props.setDestination(\"\");\n                  refUserOrigin.current.clear();\n                  refUserDestination.current.clear();\n                }\n              }\n            } catch (error) {\n              console.log(\"ðŸ˜± Error: \", error);\n            }\n          }}\n        />\n      </Form.Group>\n\n      <Form.Group\n        // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n        controlId=\"formTimeOfTravel\"\n      >\n        <div style={{ textAlign: \"center\" }}>\n          <strong style={{ textAlign: \"center\" }}>\n            When are you travelling?\n          </strong>\n        </div>\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}\n        >\n          <DateTimePicker\n            // Inbuilt props: https://github.com/Hacker0x01/react-datepicker/blob/master/docs/index.md.\n            value={props.selectedTime}\n            onChange={(date) => props.timeChoice(date)}\n            minDate={date}\n            maxDate={newDate}\n          />\n        </div>\n\n        <Form.Group\n          // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n          controlId=\"formDeparture\"\n          // CSS\n          style={{ paddingTop: \"2vh\" }}\n        >\n          <Typeahead\n            // Inbuilt props: https://github.com/ericgio/react-bootstrap-typeahead/blob/master/docs/API.md#typeahead.\n            id=\"basic-example\"\n            options={props.filteredStops}\n            placeholder=\"Departing from: e.g. Stop 334, D'Olier Street\"\n            ref={refUserOrigin}\n            onChange={(address) => {\n              try {\n                for (var i = 0; i < props.parsedStops.length; i++) {\n                  if (String(address) === props.parsedStops[i].description) {\n                    const id = props.parsedStops[i].id;\n                    const lat = props.parsedStops[i].geometry.lat;\n                    const lng = props.parsedStops[i].geometry.lng;\n                    props.destinationNumberChoice({ id: \"0\" });\n                    refUserDestination.current.clear();\n                    props.setResponseValidator(false);\n                    props.originNumberChoice({ id });\n                    props.originChoice({ lat, lng });\n                    props.panTo({ lat, lng });\n                    props.setResponse(null);\n                  }\n                }\n              } catch (error) {\n                console.log(\"ðŸ˜± Error: \", error);\n              }\n            }}\n          />\n        </Form.Group>\n\n        <Form.Group\n          // Inbuilt props: https://react-bootstrap.github.io/components/forms/#form-group-props.\n          controlId=\"formArrival\"\n        >\n          <Typeahead\n            // Inbuilt props: https://github.com/ericgio/react-bootstrap-typeahead/blob/master/docs/API.md#typeahead.\n            id=\"basic-example\"\n            options={destinationRoute}\n            placeholder=\"Destination: e.g. Stop 2007, Stillorgan Road\"\n            ref={refUserDestination}\n            onChange={(s) => {\n              try {\n                for (var i = 0; i < props.parsedStops.length; i++) {\n                  if (String(s) === props.parsedStops[i].description) {\n                    const lat = props.parsedStops[i].geometry.lat;\n                    const lng = props.parsedStops[i].geometry.lng;\n                    props.setResponseValidator(false);\n                    props.panTo({ lat, lng });\n                    props.setDirectionSelect(directionIndicator);\n                    props.setResponse(null);\n                    setDestinationSelected(s);\n                  }\n                }\n              } catch (error) {\n                console.log(\"ðŸ˜± Error: \", error);\n              }\n            }}\n          />{\" \"}\n          <Form.Group\n            // CSS\n            style={{ paddingTop: \"1vh\" }}\n          >\n            <Button\n              // Inbuilt props: https://react-bootstrap.github.io/components/buttons/#button-props.\n              style={{ width: \"45%\" }}\n              onClick={() => {\n                try {\n                  // console.log(\"PredictionInput button triggered\");\n                  for (var i = 0; i < props.parsedStops.length; i++) {\n                    if (\n                      String(destinationSelected) ===\n                      props.parsedStops[i].description\n                    ) {\n                      const id = props.parsedStops[i].id;\n                      const lat = props.parsedStops[i].geometry.lat;\n                      const lng = props.parsedStops[i].geometry.lng;\n                      props.setResponseValidator(false);\n                      props.destinationChoice({ lat, lng });\n                      props.destinationNumberChoice({ id });\n                    }\n                  }\n                } catch (error) {\n                  console.log(\"ðŸ˜± Error: \", error);\n                }\n              }}\n            >\n              Submit\n            </Button>{\" \"}\n            <Button\n              // Inbuilt props: https://react-bootstrap.github.io/components/buttons/#button-props.\n              variant=\"secondary\"\n              style={{ width: \"45%\", float: \"right\" }}\n              onClick={() => {\n                props.setResponseValidator(false);\n                props.setRouteSelect(\"\");\n                props.setRouteString(\"\");\n                props.setFilteredStops([]);\n                props.setMarkerSelection(true);\n                props.setResponse(null);\n                props.setOrigin(\"\");\n                props.setDestination(\"\");\n                props.originNumberChoice({ id: \"0\" });\n                props.destinationNumberChoice({ id: \"0\" });\n                props.setGeoMarkers([]);\n                props.setStopMarkers([]);\n                refSelectedRoute.current.clear();\n                refUserOrigin.current.clear();\n                refUserDestination.current.clear();\n              }}\n            >\n              Clear\n            </Button>\n          </Form.Group>\n        </Form.Group>\n      </Form.Group>\n      <ModelApi\n        // Passing in props - Variables defined in App.js.\n        distance={props.distance}\n        originNumber={props.originNumber}\n        destinationNumber={props.destinationNumber}\n        timeDayMonth={props.timeDayMonth}\n        routeSelect={props.routeSelect}\n        directionSelect={props.directionSelect}\n      ></ModelApi>\n    </Form>\n  );\n};\n\nexport default PredictionInput;\n"]},"metadata":{},"sourceType":"module"}