{"ast":null,"code":"// Importing outside developed components.\nimport React, { useState } from \"react\"; // Promise based HTTP client - https://github.com/axios/axios.\n\nconst axios = require(\"axios\"); // A function to request a list of stops from a user selected route going\n// in specified direction - each of these are received as input.\n\n\nexport default function TouristApi(props) {\n  // The response from the backend we need to track in state:\n  const [touristResponse, setTouristResponse] = useState({\n    tourist_mode_result: []\n  }); // The Effect Hook used to perform side effects in this component.\n  // https://reactjs.org/docs/hooks-effect.html.\n\n  React.useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n\n    const loadData = () => {\n      if (0 === 0) {\n        console.log(\"TouristApi - undefined - got rendered\"); // initial render should be nothing.\n\n        return undefined;\n      } else try {\n        console.log(\"TouristApi - got rendered!\");\n        axios.get(`/api/tourist_mode_result`).then(res => {\n          setTouristResponse(res.data);\n        });\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          console.log(\"cancelled\");\n        } else {\n          throw error;\n        }\n      }\n    };\n\n    loadData();\n    return () => {\n      source.cancel();\n    };\n  }, // Listening for changes in input values in order to\n  // trigger a call to the API  to re-render the component.\n  [props.touristModeFlag]); //   const points = crimes.map((crime) => ({\n  //     type: \"Feature\",\n  //     properties: { cluster: false, crimeId: crime.id, category: crime.category },\n  //     geometry: {\n  //       type: \"Point\",\n  //       coordinates: [\n  //         parseFloat(crime.location.longitude),\n  //         parseFloat(crime.location.latitude),\n  //       ],\n  //     },\n  //   }));\n\n  return touristResponse.tourist_mode_result;\n}","map":{"version":3,"sources":["/Users/evanbyrnes/Pycharm-python-workspace/T13_SP/client/src/components/TouristApi.js"],"names":["React","useState","axios","require","TouristApi","props","touristResponse","setTouristResponse","tourist_mode_result","useEffect","CancelToken","source","loadData","console","log","undefined","get","then","res","data","error","isCancel","cancel","touristModeFlag"],"mappings":"AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC,C,CACA;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB,C,CAEA;AACA;;;AACA,eAAe,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AACxC;AACA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCN,QAAQ,CAAC;AACrDO,IAAAA,mBAAmB,EAAE;AADgC,GAAD,CAAtD,CAFwC,CAMxC;AACA;;AACAR,EAAAA,KAAK,CAACS,SAAN,CACE,MAAM;AACJ,UAAMC,WAAW,GAAGR,KAAK,CAACQ,WAA1B;AACA,UAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;;AACA,UAAMC,QAAQ,GAAG,MAAM;AACrB,UAAI,MAAM,CAAV,EAAa;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ,EADW,CAEX;;AACA,eAAOC,SAAP;AACD,OAJD,MAKE,IAAI;AACFF,QAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AAEAZ,QAAAA,KAAK,CAACc,GAAN,CAAW,0BAAX,EAAsCC,IAAtC,CAA4CC,GAAD,IAAS;AAClDX,UAAAA,kBAAkB,CAACW,GAAG,CAACC,IAAL,CAAlB;AACD,SAFD;AAGD,OAND,CAME,OAAOC,KAAP,EAAc;AACd,YAAIlB,KAAK,CAACmB,QAAN,CAAeD,KAAf,CAAJ,EAA2B;AACzBP,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACD,SAFD,MAEO;AACL,gBAAMM,KAAN;AACD;AACF;AACJ,KAnBD;;AAoBAR,IAAAA,QAAQ;AACR,WAAO,MAAM;AACXD,MAAAA,MAAM,CAACW,MAAP;AACD,KAFD;AAGD,GA5BH,EA6BE;AACA;AACA,GAACjB,KAAK,CAACkB,eAAP,CA/BF,EARwC,CA0CxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAOjB,eAAe,CAACE,mBAAvB;AACD","sourcesContent":["// Importing outside developed components.\nimport React, { useState } from \"react\";\n// Promise based HTTP client - https://github.com/axios/axios.\nconst axios = require(\"axios\");\n\n// A function to request a list of stops from a user selected route going\n// in specified direction - each of these are received as input.\nexport default function TouristApi(props) {\n  // The response from the backend we need to track in state:\n  const [touristResponse, setTouristResponse] = useState({\n    tourist_mode_result: [],\n  });\n\n  // The Effect Hook used to perform side effects in this component.\n  // https://reactjs.org/docs/hooks-effect.html.\n  React.useEffect(\n    () => {\n      const CancelToken = axios.CancelToken;\n      const source = CancelToken.source();\n      const loadData = () => {\n        if (0 === 0) {\n          console.log(\"TouristApi - undefined - got rendered\");\n          // initial render should be nothing.\n          return undefined;\n        } else\n          try {\n            console.log(\"TouristApi - got rendered!\");\n\n            axios.get(`/api/tourist_mode_result`).then((res) => {\n              setTouristResponse(res.data);\n            });\n          } catch (error) {\n            if (axios.isCancel(error)) {\n              console.log(\"cancelled\");\n            } else {\n              throw error;\n            }\n          }\n      };\n      loadData();\n      return () => {\n        source.cancel();\n      };\n    },\n    // Listening for changes in input values in order to\n    // trigger a call to the API  to re-render the component.\n    [props.touristModeFlag]\n  );\n\n  //   const points = crimes.map((crime) => ({\n  //     type: \"Feature\",\n  //     properties: { cluster: false, crimeId: crime.id, category: crime.category },\n  //     geometry: {\n  //       type: \"Point\",\n  //       coordinates: [\n  //         parseFloat(crime.location.longitude),\n  //         parseFloat(crime.location.latitude),\n  //       ],\n  //     },\n  //   }));\n\n  return touristResponse.tourist_mode_result;\n}\n"]},"metadata":{},"sourceType":"module"}