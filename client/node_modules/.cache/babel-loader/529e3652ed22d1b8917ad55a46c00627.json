{"ast":null,"code":"var _jsxFileName = \"/Users/evanbyrnes/Pycharm-python-workspace/T13_SP/client/src/components/T13GoogleMap.js\";\nimport React, { useState, Component } from \"react\";\nimport { useLoadScript, GoogleMap, Marker, InfoWindow, MarkerClusterer, DirectionsRenderer } from \"@react-google-maps/api\";\nimport Directions from \"./Directions\";\nimport googleMapApiKey from \".././config\";\nimport * as data from \".././data/db-stops.json\"; // Import custom styles to customize the style of Google Map\n\nconst styles = require(\"../data/GoogleMapStyles.json\");\n\nlet directionsService = new maps.DirectionsService();\nconst options = {\n  imagePath: \"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m\"\n};\nconst mapOptions = {\n  styles: styles,\n  disableDefaultUI: true,\n  zoomControl: true\n};\nconst rawData = data.results;\nconst myStops = rawData.map(stop => ({\n  type: \"Feature\",\n  properties: {\n    id: stop.stopid,\n    fullname: stop.fullname,\n    routes: stop.operators[0].routes\n  },\n  geometry: {\n    type: \"Point\",\n    pos: {\n      lat: parseFloat(stop.latitude),\n      lng: parseFloat(stop.longitude)\n    }\n  }\n}));\nconst icon = {\n  url: \"/Bus-logo.svg\",\n  scaledSize: {\n    width: 18,\n    height: 18\n  }\n};\nexport default function T13GoogleMap() {\n  const {\n    isLoaded,\n    loadError\n  } = useLoadScript({\n    googleMapsApiKey: googleMapApiKey\n  }); // consts: [53.349804, -6.260310] - Dublin\n\n  const [center, setCenter] = useState({\n    lat: 53.349804,\n    lng: -6.26031\n  });\n  const [zoom, setZoom] = useState(11); // The things we need to track in state\n\n  const [selectedPlace, setSelectedPlace] = useState(null);\n  const [markerMap, setMarkerMap] = useState({});\n  const [infoOpen, setInfoOpen] = useState(false);\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback(map => {\n    mapRef.current = map;\n  }, []);\n  const panTo = React.useCallback(({\n    lat,\n    lng\n  }) => {\n    mapRef.current.panTo({\n      lat,\n      lng\n    });\n    mapRef.current.setZoom(16);\n  }, []); // We have to create a mapping of our places to actual Marker objects\n\n  const markerLoadHandler = (marker, stop) => {\n    return setMarkerMap(prevState => {\n      return { ...prevState,\n        [stop.properties.id]: marker\n      };\n    });\n  };\n\n  const markerClickHandler = (event, place) => {\n    // Remember which stop was clicked\n    setSelectedPlace(place); // Required so clicking a 2nd marker works as expected\n\n    if (infoOpen) {\n      setInfoOpen(false);\n    }\n\n    setInfoOpen(true);\n  };\n\n  if (loadError) return \"Error\";\n  if (!isLoaded) return \"Loading...\";\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(GoogleMap, {\n    onLoad: onMapLoad,\n    center: center,\n    zoom: zoom,\n    maxZoom: 13,\n    options: mapOptions,\n    mapContainerStyle: {\n      height: \"94vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Locate, {\n    panTo: panTo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Directions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(MarkerClusterer, {\n    options: options,\n    maxZoom: 16,\n    minimumClusterSize: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, clusterer => myStops.map(stop => /*#__PURE__*/React.createElement(Marker, {\n    icon: icon,\n    key: stop.properties.id,\n    position: stop.geometry.pos,\n    clusterer: clusterer,\n    onLoad: marker => markerLoadHandler(marker, stop),\n    onClick: event => markerClickHandler(event, stop),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }))), infoOpen && selectedPlace && /*#__PURE__*/React.createElement(InfoWindow, {\n    anchor: markerMap[selectedPlace.properties.id],\n    onCloseClick: () => setInfoOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, \"Stop Number: \", selectedPlace.properties.id), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, \"Routes: \", selectedPlace.properties.routes.join(\", \"))))));\n} // function to adjust map to the user's location\n\nfunction Locate({\n  panTo\n}) {\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: \"locate\",\n    onClick: () => {\n      navigator.geolocation.getCurrentPosition(position => {\n        panTo({\n          // lat: position.coords.latitude,\n          // lng: position.coords.longitude,\n          // Hard coding Dublin for the time being.\n          lat: 53.343,\n          lng: -6.2562\n        });\n      }, () => null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    // src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAAD6+vrz8/Pd3d3CwsJjY2Pr6+vIyMjj4+P29va9vb1eXl6ioqKampopKSmTk5MJCQlZWVkwMDCpqak4ODju7u6MjIyFhYV2dnYdHR3Pz89PT098fHxpaWmNjY0jIyMmJiZHR0cXFxe0tLQ/Pz/OgDYhAAANF0lEQVR4nOVd2WKqMBCtLAIisgsI2lbt///idRcwmcxAEmzveWxZPCSZzJ6PD30wntD4VvUwHMexzvC28zu23uUvp//8bq6GZbm2u2qS5YyNZdKsTldY1q/k6dpZlDQxh1sbcZNEme1O/YMpWLhBUeYhgtwTYV4WgbuY+qejEERJjhk6xmDmSRRM/fNFOM7zwzB6N5KHfH6cmgQPxkfdjODWRlN/vJ3sMdZeIoneFYm3fieSCyvbSeV3xi6z3kbwuAVNbmIRFu+xhfjltxJ+Z3yX/tT01kGlZvzuCKtgPSVBazlma8AhXlqT8XPkik8+EmcSfqYufheOpm56hpdp5HdG5mndHxfHvWaCs9n+qHF7rLcb7QRns8221kWw1D+AV+xLLfw8nsWuA0tPPcHVYUKCs9lhpZifJV/DpmKnVAHw86n5nZCr01XXx6nJ3XBUpKquq6mZPVApoehPvwSf2CmYqXY6NasOUls2QfdrxM+JK5aEyqsxpteXXPvf/Bz2M8I0unoimP+9fLkiSgfa0J8S7Y1FSX9/nDa76P4A9hLe3f8d7Zp0wHiW0lTxRUF+eVqu7NYnZq/h9HmBaa9K+kIvJFEkT9GwzHqijj1AcfciPyup81XORDWJIzgP6v6ndTgM+86JRR3MaS8rJFA0C9IKiSxG0DPgXPwahjEcK6K8Lh5PcUGaoiXH1YCapXeSHkmufY5cixQhsym5LjEKwxOckuBDGCduTPznzLeAccqWICH/Bm+Lt2LKMRMVPUV/StBqWzFvAo1Zq/zBvvxzOEEX+YpDJfAReczbBB6JusK6EwYrcDZSF/3JhPNky7htK7rJzJDD+DVQDfeRSgbGV2sx7hN7I9B+53SQMbVG2oO4pB/75T7Udzcc3I/YDTCJkRb9EivI7O6OEWMnlolzXg6w+lE+mU2ADybU8+ey/prj3ddGgNocyRkcPuapDc3NbldNekZT0SQDLseDuBQtzIa7JXsuLf8M+m0sUdxHTnssRsoc9cX0TMya2Ymf8wRbB+lCuisIxKssfgXB4e8hlAm9BFEUD/iwDUJA6yaIorjEPktsUOT6CZ4oiqUfMr5YCwOgapzqQoiVkD1q+1oIRXM+VQ7PWjiKW4Q5bByFKsQUU/QK4VrcHMVKlieco9MRRFDci+Wp0F6ZkiCCYiZ6gvneBBEURZqWKJVr+iRsW6COJPDtIoNzqz2/7AXrUuCihtP8BEPYTJcI+YQp8PyDg8hyp7Sw0ZZ2BaIW7GeA620tUEjfpdyDFwe5Yc/XSAJ4hi/fpT7AgEci5o+EQO+bXsrcIdjTuDnFPhygnCYVmQ1Y5nPdp7DVlOmfo6bP234NWPXiWFHuN3TTj4a8xy4MO+E70DzQ4f/NFKdwqPCgfQjdVQgksBsZqNowg4oWuAorzWKmjtLZLASUYBMUiyFDNYFn9o/evf4WPFxB86YG5yljysGBGD0J1jcYt6haCscFQcHICNWwg5g3EP3J45Ddl0sEXwf75V8EowHq3MJgpjSYx4deJVwZoEMpeZmm0NUbXTvFwm/5UIQrwwM18P7VNXSxplVouJ+tLeBHvDLAldifAWAAS4++5hff7ZcKHS4C3a3pXTz5ELq9tL0Qo2GAg9i9FIxeaViF5qovGBFDKNgAujot5BiIlOtrxuol7YObEda9EUrzm3cuhbYW1XvhgmWyI316kNslb18YAGrsXK2cMZlRhD1SDXaAyXdom/oR4L4gpFvQYdbMbfuATTswAJdN3NKJFoBCE6rUuf2SPXnwSaM1YBElz6e4wDKUlxD/guOWkzjHNmCZgMoI8udjIB8bSmoPgVNwEwMLwsIAjL6Wzw2w7oflxIlhfvLzAkPKO6H8wuJxFTDSavSZNZiaS3sn5scDyzBWUZRqwuk6OS0hdsVfYo8n2Xx5JL9E7MOpBQlXxI8KFNU9/DzAYm1kO6BMX5RQkRJfaQJm0U1MQsodKVcMgUycu01eF8CUuKnUFrDfC1wlRFgVIlWUrEIBA5RcdWqLP8xARQQdzhaTOD4ggscXI7eIrssXRqng2SR+CHqz2WaACsX/cPFVmALZDdImqYetLhqSCQFM06swBepGCsGzkXBAP1cbgzIhgK93GUMD2H+lVBM7Prqo8DDIkAGG6BIXcID9RApB3AK8YGCRFv+Bzdl8h/pZyWCIyvq/4mugms9/4iXe7fDD/hd3kDMuAwPyM/RBDx4EFxcLn8Hy/H/AmVN97NI4nsVxuBrsUUQLmdMQkgSptwovvy3dQRkWFsywbXPQiysucFqBiK/lVU/MlmzblyK5OyUYgItCwLCLQWZGy3qbPyWzy5q6KcGphylOoDMcQvEZWcg7VcJO+frdCaWgaIJEhjF9t3rOpb7h/mqa43eKGl9Af5YfoO+/i7nw3T08h/DFr/wiYwlDSBDPp/3HIGzI5GrUx7MZvVb6/WDwBQDY6t0zdsaHQenTUNEIWg+tn1XN0t3FCIYvpZvTnMiQmEH7/Cksr2vHebLDr0LAnh3PkOY9zZ4WPfP/7ScThBi2Als9w3bWkohhRdgL34eh33I6CRiiY01vxdBpCwQBQ1LW3Nsw7KjcMMMNKfyjlCFBlpodNyYsS2mbkFJZSvgpXd8IuB+mRLOFuh+q0WnWvTshnYZq+BJ1GkV6aT98Buml5FQIml6qxrZ4LRfg2xZ03wXRtlBiH75GQPn24YBsFkX2IYGgwxLoHBt/kNdZlo0/2E/D9kKz/TTDfFyS/DRDfW1HgrAbnK6D97Up8JcSNqCROWUof6l8n7dPGEIpySz8x1993rLjFoQ2drOtlLRA/vMvcQvpsaca3bV97kshKIo9yY4fmthVuK8l5XWK4oeyY8DYtub8PpJUiGPAUuP4C1zbSjkL8AphHF9uLoagCvn64WTyQ+RiSM2nMcT8NpXczHEgd/SWTyM1J0rYQ+tQyc5YBQTNvcxAYl6bKfKhVL70TDlxXpvM3ETBEO5kbRAtYHIT5eWXQgnjJ6xUlNpi8kvl5QiD+tqnmvZSqB8vK88baFmQyuzz3wa0EzxVMkm5+gb3S30VygpvcLn6kuoteC0LvrbqOhMh6y3k1Mxw2rcflJ5DiayZkVP35DOtpm2tslcBtu5JSu2ayWr0tlHc5BRduyaj/pBlNQWqD/RD1x/KqCF9megp2PRBCgg1pOPrgPtSO1eiwPRAqAMeXctt9CqxSy2HFRNquUfX43eG8LvQc1AxqR5/ZE8Fq9VK5fDpaurWQ+qpMLIvRutde1/Xiai0vhjjeps8u+HEGrt8E3ubjOpPcxfaobKaWgaI/WlG9Rhyr2b2j95uWdQeQyP6RF3jAoKjZqSD3CdqRK+vs58njTT3xaT3+hrer81MZuFKywbfwpB+bYN77vmzxNbecXBIz73BfROP0l2gYgzrm/gf9L78Pf1LBdERbv/S39ODFnatAz1of0sfYUHfeKCP8C/pBS2IHcDZB3++n/d/0JP97/fV/w/ORvj751v8B2eUvPU5M8JsX8w5M299VpBIDqLOCvoPznt62zO7oHj2Deisgz9/7tp/cHbe3z//EHeGpa1P3qwxBGk5eJhzSA/0bjIDzyE1OU1AO6D2jcd0lYnnNB/i0LNk3Tmmzokc0EMlM+cEP/7g84Az1EHydKPn75/p/PfP5f4PzlbHV6P+ZMKpytLmhZWVZga67p8gdyR5AKg16eBQCQQHO/wqUEFqcZ/MG0aEhcBmuG0IgodsHQnUQW5HzWBA6GzzAkKRVr4FhoQdEAGqObwtaou4YGAbuxvgoGIXG36dD3vH5p4O4JS4wpsL2KFCAkX0RD2j5IhVCkPDI1T3Udq382AW+NLwEyKLsT/ykkBf4yCGY0HJeC+ICwkuapMwUc+YB3X/szqcMezP6kUdUHpYnCCD4Ll9Ou2ts7DMepIVNUutrIRDtK+QVQBAETc3JOXKbr2drR21av9Me1WK3TB9jBUyLYqktX9FnDbFY52xVdyHyRoUTUpa7VfIPLaBPFFvLMM0Ki4KB/Pf53+4RZSGA9jN5E3RG/r940hYVqz9O69whhEbjH4wIwGUiE0BBQ3/P3ykvagFOyVJyEirXwdUhRXW2EJ01Tiq82P6eI1fHXKlafLW9ItxpzofZIXueqEEBxXHwvTgjdnFxmKp5zTNUhhCVYS9tiNt6y3BBpeGzVZj0tniqH8Y90ddlSoXoH210oDxO0uGSbfnhoN/BLlSQD205PKbLgHb3Q8z7SiI97orHTpYB4laqypNgqnyk+5w/PJbGb/vUk43sLFwC6qPDIewmHR+trGwMvka+S6ztG6AAhhrT65gTbz1u9Q+PGB81JQmzRCa+uPt6N1xnOeHMRtIfMjn06eSCxBEST6MZJwn0bsUrcBYuEFR5jT5GuZlEbjvJFqEcO0sShrMYMZNEmX222wMFBiW5druqkl4XoFl0qxOV1jW28oVFAzHcawTPH83v2Pne+c/nf7zu7n1YTyh8a3/ACS301c2TaGmAAAAAElFTkSuQmCC\"\n    alt: \"compass\",\n    src: \"/compass.svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/evanbyrnes/Pycharm-python-workspace/T13_SP/client/src/components/T13GoogleMap.js"],"names":["React","useState","Component","useLoadScript","GoogleMap","Marker","InfoWindow","MarkerClusterer","DirectionsRenderer","Directions","googleMapApiKey","data","styles","require","directionsService","maps","DirectionsService","options","imagePath","mapOptions","disableDefaultUI","zoomControl","rawData","results","myStops","map","stop","type","properties","id","stopid","fullname","routes","operators","geometry","pos","lat","parseFloat","latitude","lng","longitude","icon","url","scaledSize","width","height","T13GoogleMap","isLoaded","loadError","googleMapsApiKey","center","setCenter","zoom","setZoom","selectedPlace","setSelectedPlace","markerMap","setMarkerMap","infoOpen","setInfoOpen","mapRef","useRef","onMapLoad","useCallback","current","panTo","markerLoadHandler","marker","prevState","markerClickHandler","event","place","clusterer","join","Locate","navigator","geolocation","getCurrentPosition","position"],"mappings":"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","sourcesContent":["import React, { useState, Component } from \"react\";\nimport {\n  useLoadScript,\n  GoogleMap,\n  Marker,\n  InfoWindow,\n  MarkerClusterer,\n  DirectionsRenderer,\n} from \"@react-google-maps/api\";\nimport Directions from \"./Directions\";\nimport googleMapApiKey from \".././config\";\nimport * as data from \".././data/db-stops.json\";\n\n// Import custom styles to customize the style of Google Map\nconst styles = require(\"../data/GoogleMapStyles.json\");\n\nlet directionsService = new maps.DirectionsService();\nconst options = {\n  imagePath:\n    \"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m\",\n};\n\nconst mapOptions = {\n  styles: styles,\n  disableDefaultUI: true,\n  zoomControl: true,\n};\n\nconst rawData = data.results;\nconst myStops = rawData.map((stop) => ({\n  type: \"Feature\",\n  properties: {\n    id: stop.stopid,\n    fullname: stop.fullname,\n    routes: stop.operators[0].routes,\n  },\n  geometry: {\n    type: \"Point\",\n    pos: {\n      lat: parseFloat(stop.latitude),\n      lng: parseFloat(stop.longitude),\n    },\n  },\n}));\n\nconst icon = { url: \"/Bus-logo.svg\", scaledSize: { width: 18, height: 18 } };\n\nexport default function T13GoogleMap() {\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: googleMapApiKey,\n  });\n  // consts: [53.349804, -6.260310] - Dublin\n  const [center, setCenter] = useState({ lat: 53.349804, lng: -6.26031 });\n  const [zoom, setZoom] = useState(11);\n  // The things we need to track in state\n  const [selectedPlace, setSelectedPlace] = useState(null);\n  const [markerMap, setMarkerMap] = useState({});\n  const [infoOpen, setInfoOpen] = useState(false);\n\n  const mapRef = React.useRef();\n  const onMapLoad = React.useCallback((map) => {\n    mapRef.current = map;\n  }, []);\n\n  const panTo = React.useCallback(({ lat, lng }) => {\n    mapRef.current.panTo({ lat, lng });\n    mapRef.current.setZoom(16);\n  }, []);\n\n  // We have to create a mapping of our places to actual Marker objects\n  const markerLoadHandler = (marker, stop) => {\n    return setMarkerMap((prevState) => {\n      return { ...prevState, [stop.properties.id]: marker };\n    });\n  };\n\n  const markerClickHandler = (event, place) => {\n    // Remember which stop was clicked\n    setSelectedPlace(place);\n    // Required so clicking a 2nd marker works as expected\n    if (infoOpen) {\n      setInfoOpen(false);\n    }\n    setInfoOpen(true);\n  };\n\n  if (loadError) return \"Error\";\n  if (!isLoaded) return \"Loading...\";\n\n  return (\n    <div>\n      <GoogleMap\n        onLoad={onMapLoad}\n        center={center}\n        zoom={zoom}\n        maxZoom={13}\n        options={mapOptions}\n        mapContainerStyle={{\n          height: \"94vh\",\n        }}\n      >\n        <Locate panTo={panTo} />\n        <Directions></Directions>\n\n        <MarkerClusterer options={options} maxZoom={16} minimumClusterSize={6}>\n          {(clusterer) =>\n            myStops.map((stop) => (\n              <Marker\n                icon={icon}\n                key={stop.properties.id}\n                position={stop.geometry.pos}\n                clusterer={clusterer}\n                onLoad={(marker) => markerLoadHandler(marker, stop)}\n                onClick={(event) => markerClickHandler(event, stop)}\n              />\n            ))\n          }\n        </MarkerClusterer>\n\n        {infoOpen && selectedPlace && (\n          <InfoWindow\n            anchor={markerMap[selectedPlace.properties.id]}\n            onCloseClick={() => setInfoOpen(false)}\n          >\n            <div>\n              <h3>Stop Number: {selectedPlace.properties.id}</h3>\n              <h5>Routes: {selectedPlace.properties.routes.join(\", \")}</h5>\n            </div>\n          </InfoWindow>\n        )}\n      </GoogleMap>\n    </div>\n  );\n}\n\n// function to adjust map to the user's location\nfunction Locate({ panTo }) {\n  return (\n    <button\n      className=\"locate\"\n      onClick={() => {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            panTo({\n              // lat: position.coords.latitude,\n              // lng: position.coords.longitude,\n              // Hard coding Dublin for the time being.\n              lat: 53.343,\n              lng: -6.2562,\n            });\n          },\n          () => null\n        );\n      }}\n    >\n      <img\n        // src=\"data:image/png;base64,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\"\n        alt=\"compass\"\n        src=\"/compass.svg\"\n      />\n    </button>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}