{"ast":null,"code":"var _jsxFileName = \"/Users/evanbyrnes/Pycharm-python-workspace/T13_SP/client/src/components/RtpiApi.js\";\n// Importing outside developed components.\nimport React from \"react\";\nimport Table from \"react-bootstrap/Table\"; // Promise based HTTP client - https://github.com/axios/axios.\n\nconst axios = require(\"axios\"); // Makes GET request to Django API with user selected stopid as parameter.\n// Django makes GET request to the RTPI API, which React returns as a Table.\n// Clicking a bus stop's marker will display this Table.\n\n\nconst RtpiApi = props => {\n  // A placeholder variable used while waiting for RTPI response.\n  const placeholder = {\n    results: [{\n      arrivaldatetime: \"08/07/2020 00:00:00\",\n      route: \"\",\n      destination: \"\",\n      duetime: \"\"\n    }]\n  }; // The response from the backend we need to track in state:\n\n  const [rawStopData, setRawStopData] = React.useState(placeholder); // The Effect Hook used to perform side effects in this component.\n  // https://reactjs.org/docs/hooks-effect.html.\n\n  React.useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n\n    const loadData = () => {\n      try {\n        axios.get(`/api/rtpi_api`, {\n          params: {\n            stopid: props.number\n          }\n        }).then(res => {\n          setRawStopData(res.data);\n        });\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          console.log(\"cancelled\");\n        } else {\n          throw error;\n        }\n      }\n    };\n\n    axios.get(`/api/rtpi_api`, {\n      params: {\n        stopid: props.number\n      }\n    }).then(res => {\n      const rawStopData = res.data;\n      setRawStopData(rawStopData);\n    });\n  }, // ?? - Maybe take away props.number and make this array empty.\n  []);\n  const stopData = rawStopData.results;\n  const realInfo = stopData.map(info => ({\n    id: info.arrivaldatetime,\n    route: info.route,\n    destination: info.destination,\n    arrivaltime: info.duetime\n  }));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    // CSS\n    style: {\n      maxHeight: \"15vh\",\n      overflowY: \"scroll\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Table // Inbuilt props: https://react-bootstrap.github.io/components/table/#table-api.\n  , {\n    striped: true,\n    bordered: true,\n    hover: true,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"Route\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"Destination\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"Due\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, realInfo.map(info => {\n    if (info.arrivaltime === \"Due\") return /*#__PURE__*/React.createElement(\"tr\", {\n      key: info.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }\n    }, info.route), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 19\n      }\n    }, info.destination), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 19\n      }\n    }, info.arrivaltime));else {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: info.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 19\n        }\n      }, info.route), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 19\n        }\n      }, info.destination), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 19\n        }\n      }, info.arrivaltime, \" mins\"));\n    }\n  }))));\n};\n\nexport default RtpiApi;","map":{"version":3,"sources":["/Users/evanbyrnes/Pycharm-python-workspace/T13_SP/client/src/components/RtpiApi.js"],"names":["React","Table","axios","require","RtpiApi","props","placeholder","results","arrivaldatetime","route","destination","duetime","rawStopData","setRawStopData","useState","useEffect","CancelToken","source","loadData","get","params","stopid","number","then","res","data","error","isCancel","console","log","stopData","realInfo","map","info","id","arrivaltime","maxHeight","overflowY"],"mappings":"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","sourcesContent":["// Importing outside developed components.\nimport React from \"react\";\nimport Table from \"react-bootstrap/Table\";\n// Promise based HTTP client - https://github.com/axios/axios.\nconst axios = require(\"axios\");\n\n// Makes GET request to Django API with user selected stopid as parameter.\n// Django makes GET request to the RTPI API, which React returns as a Table.\n// Clicking a bus stop's marker will display this Table.\nconst RtpiApi = (props) => {\n  // A placeholder variable used while waiting for RTPI response.\n  const placeholder = {\n    results: [\n      {\n        arrivaldatetime: \"08/07/2020 00:00:00\",\n        route: \"\",\n        destination: \"\",\n        duetime: \"\",\n      },\n    ],\n  };\n  // The response from the backend we need to track in state:\n  const [rawStopData, setRawStopData] = React.useState(placeholder);\n\n  // The Effect Hook used to perform side effects in this component.\n  // https://reactjs.org/docs/hooks-effect.html.\n  React.useEffect(\n    () => {\n      const CancelToken = axios.CancelToken;\n      const source = CancelToken.source();\n      const loadData = () => {\n        try {\n          axios\n            .get(`/api/rtpi_api`, {\n              params: {\n                stopid: props.number,\n              },\n            })\n            .then((res) => {\n              setRawStopData(res.data);\n            });\n        } catch (error) {\n          if (axios.isCancel(error)) {\n            console.log(\"cancelled\");\n          } else {\n            throw error;\n          }\n        }\n      };\n      axios\n        .get(`/api/rtpi_api`, {\n          params: {\n            stopid: props.number,\n          },\n        })\n        .then((res) => {\n          const rawStopData = res.data;\n          setRawStopData(rawStopData);\n        });\n    },\n\n    // ?? - Maybe take away props.number and make this array empty.\n    []\n  );\n\n  const stopData = rawStopData.results;\n  const realInfo = stopData.map((info) => ({\n    id: info.arrivaldatetime,\n    route: info.route,\n    destination: info.destination,\n    arrivaltime: info.duetime,\n  }));\n\n  return (\n    <div\n      // CSS\n      style={{ maxHeight: \"15vh\", overflowY: \"scroll\" }}\n    >\n      <Table\n        // Inbuilt props: https://react-bootstrap.github.io/components/table/#table-api.\n        striped\n        bordered\n        hover\n        size=\"sm\"\n      >\n        <thead>\n          <tr>\n            <th>Route</th>\n            <th>Destination</th>\n            <th>Due</th>\n          </tr>\n        </thead>\n        <tbody>\n          {realInfo.map((info) => {\n            if (info.arrivaltime === \"Due\")\n              return (\n                <tr key={info.id}>\n                  <td>{info.route}</td>\n                  <td>{info.destination}</td>\n                  <td>{info.arrivaltime}</td>\n                </tr>\n              );\n            else {\n              return (\n                <tr key={info.id}>\n                  <td>{info.route}</td>\n                  <td>{info.destination}</td>\n                  <td>{info.arrivaltime} mins</td>\n                </tr>\n              );\n            }\n          })}\n        </tbody>\n      </Table>\n    </div>\n  );\n};\n\nexport default RtpiApi;\n"]},"metadata":{},"sourceType":"module"}